<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>ALA Spatial Portal Map</title>
        <META HTTP-EQUIV="cache-control" CONTENT="no-cache">
        <META HTTP-EQUIV="pragma" CONTENT="no-cache">
        <meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" />
        <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">

        <link rel="stylesheet" type="text/css" href="css/map.css?" media="screen" >
        <link rel="stylesheet" type="text/css" href="css/mapprint.css?" media="print" >

        <script type="text/javascript" src="http://maps.google.com/maps/api/js?libraries=geometry&sensor=false"></script>
        <script type="text/javascript" src="map.js.dsp"></script>


        <script type="text/javascript">
            //var date = new Date();
            //var currTime = date.getTime();
            //var head= document.getElementsByTagName('head')[0];
            //var script= document.createElement('script');
            //script.type= 'text/javascript';
            //script.src= 'scripts/map2.js?tz='+currTime;
            //head.appendChild(script);

            function detectIE6() {
                var browser=navigator.appName;
                var version=navigator.appVersion;
                if ( browser== "Microsoft Internet Explorer" )  {
                    var version1 = version.substring(22,25);
                    if (version1 < 7) {
                        alert("The ALA Spatial Portal will not render correctly with Internet Explorer 6 due to unsupported features...\n\nPlease upgrade your browser.");
                    };
                }
            }
            detectIE6();
            
            function doSome(thing) {
                if (thing == "die") {
                    if(hovercontrol != null) {
                        toggleActiveHover();
                    }                    
                } else {
                    if(hovercontrol == null) {
                        toggleActiveHover(); 
                    }                    
                }

                if (thing == "min") {
                    $("#lvalues").removeClass("layervaluesMax").removeClass("layervaluesDie").addClass("layervaluesMin");
                    $("#layervalues").show();
                    setTimeout(function() {
                        parent.jq('$hovertool')[0].style.display="none"
                    }, 100);
                } else if (thing == "max") {
                    $("#lvalues").removeClass("layervaluesMin").removeClass("layervaluesDie").addClass("layervaluesMax");
                    $("#layervalues").hide();
                    setTimeout(function() { //for IE9
                        parent.jq('$hovertool')[0].style.display=""
                    }, 100);
                } else if (thing == "die") {
                    $("#lvalues").removeClass("layervaluesMin").removeClass("layervaluesMax").addClass("layervaluesDie");
                    $("#layervalues").show();
                    setTimeout(function() {
                        parent.jq('$nearesttool')[0].style.display="none"
                    }, 100);
                } 
            }
            
            
            function doSomething(ele) {
                var ele = $("div.lvicons span a");
                //console.log($(ele).text());
                //$(ele).toggleClass("hidden");
                if ($(ele).text() == "x") {
                    $(ele).text("^");
                } else {
                    $(ele).text(escape("x"));
                }
                $("#lvalues").toggleClass("layervaluesDie");
            }
        </script>

    </head>

    <body id="mapbody" onload="buildMap()">

        <div id="mapdiv"></div>
        <div class="leftdrop"></div>
        <div class="topdrop" id="topdrop"></div>

        <div id="controlPanZoom" ></div>
        <div id="zoomtolocation" onClick="parent.goToUserLocation()"></div>
        <div id="navtoolbar"></div>
        <div id="areaTool"></div>
        <div id="hoverTool" onClick="toggleActiveHover()"></div>
        <div id="addPanoramio" class="imagesOff" onClick="checkIfLoadPanoramio()"></div>
        <div id="panoramioLoader" style="position:absolute;top:50%;left:50%;display:none;z-index: 99;">
            <img src="img/ajax-loader.gif" alt="loading..."/>
        </div>        
        <div id="layervalues">
            <div id="lheader">
                <div class="lvicons">
                    <!--
                    <span><a href="javascript:doSome('min');">&or;</a></span>
                    <span><a href="javascript:doSome('max');">&and;</a></span>
                    <span><a href="javascript:doSome('die');">&Chi;</a></span>
                    -->
                    <!-- <span><a href="javascript:doSomething(this);">&and;</a></span> -->
                    <span><a href="javascript:doSomething();" class="shown">&or;</a></span>
                </div>
                Layer values:
            </div>                
            <div id="lvalues" class="layervaluesMin"></div>
        </div>
        <div id="mapinfo">
            <div id="mapscale"></div>
            <div id="mapcoords"></div>
        </div>

        <div id="gmaplyrswtch">
            <div id="gmaplyrHyb"><a href="" onclick="changeBaseLayer('hybrid')">Satellite</a></div>
            <div id="gmaplyrStr"><a href="" onclick="changeBaseLayer('normal')">Normal</a></div>
        </div>


        <div id="radiusDisplay">approximate radius: <span id="currradius">0</span> km</div>
        <!--
        <div id="loader" style="position:absolute;top:50%;left:50%;display:none;z-index: 99;">
            <img src="img/loading.gif" alt="loading..."/>
        </div>
        -->
        <div style="left: 0px; top: 0px;" class="z-loading" id="loader"><div class="z-loading-indicator"><span class="z-loading-icon"></span> Loading...</div></div>
    </body>
</html>
